doctype html
html(lang="en")
    head
        meta(charset="UTF-8")
        meta(http-equiv="x-ua-compatible", content="ie=edge")
        meta(name="viewport" content="width=device-width, initial-scale=1")

        if !!pugTitle
            title !{pugTitle}
            meta(itemprop="name", content=pugTitle)
            meta(name="twitter:title", content=pugTitle)
            meta(name="og:title", content=pugTitle)
            meta(name="og:site_name", content=pugTitle)

        if !!pugDescription
            meta(name="description", content=pugDescription)
            meta(itemprop="description", content=pugDescription)
            meta(name="twitter:description", content=pugDescription)
            meta(name="og:description", content=pugDescription)

        if !!meImageUrl
            link(rel="preload", href=meImageUrl, as="image")
            meta(name="image", content=meImageUrl)
            meta(itemprop="image", content=meImageUrl)
            meta(name="twitter:image:src", content=meImageUrl)
            meta(name="og:image", content=meImageUrl)

        if !!twitterUsername
            meta(name="twitter:site", content="@" + twitterUsername)
            meta(name="twitter:creator", content="@" + twitterUsername)
        meta(name="og:locale", content=locale)
        if !!facebookUsername
            meta(name="fb:admins", content=facebookUsername)
        if !!facebookAppId
            meta(name="fb:app_id", content=facebookAppId)
        meta(name="og:type", content="website")

        if !!pageUrl
            link(rel="canonical", href=pageUrl)
            meta(name="og:url", content=pageUrl)

        if !!feedUrl && !!pugTitle
            link(rel="alternate", type="application/rss+xml", title=pugTitle, href=feedUrl)

        if environment === "printable"
            link(rel="stylesheet", href="https://use.fontawesome.com/releases/v5.14.0/css/all.css", integrity="sha384-HzLeBuhoNPvSl5KYnjx0BT+WB0QEEqLprO+NBkkk5gbc67FTaL7XIGa2w1L0Xbgc", crossorigin="anonymous")
            style(type="text/css")
                | !{css}
        else
            if typeof assetUrl === "string"
                if !!esmBundleName
                    link(rel="preload", href=assetUrl + "/vendor.esm.js", as="script")
                    link(rel="preload", href=assetUrl + "/" + esmBundleName + ".js", as="script")
                else
                    link(rel="preload", href=assetUrl + "/vendor.js", as="script")
                    link(rel="preload", href=assetUrl + "/" + bundleName + ".js", as="script")
                if stylesheetName
                    link(rel="preload", href=assetUrl + "/fa-regular-400.woff2", as="font", type="font/woff2", crossorigin)
                    link(rel="preload", href=assetUrl + "/fa-solid-900.woff2", as="font", type="font/woff2", crossorigin)
                    link(rel="preload", href=assetUrl + "/fa-brands-400.woff2", as="font", type="font/woff2", crossorigin)
                    link(rel="preload", href=assetUrl + "/" + stylesheetName, as="style")
                    link(rel="stylesheet", href=assetUrl + "/" + stylesheetName)

        if typeof assetUrl === "string"
            link(rel="apple-touch-icon", sizes="57x57", href=assetUrl + "/apple-touch-icon-57x57.png")
            link(rel="apple-touch-icon", sizes="60x60", href=assetUrl + "/apple-touch-icon-60x60.png")
            link(rel="apple-touch-icon", sizes="72x72", href=assetUrl + "/apple-touch-icon-72x72.png")
            link(rel="apple-touch-icon", sizes="76x76", href=assetUrl + "/apple-touch-icon-76x76.png")
            link(rel="apple-touch-icon", sizes="114x114", href=assetUrl + "/apple-touch-icon-114x114.png")
            link(rel="apple-touch-icon", sizes="120x120", href=assetUrl + "/apple-touch-icon-120x120.png")
            link(rel="apple-touch-icon", sizes="144x144", href=assetUrl + "/apple-touch-icon-144x144.png")
            link(rel="apple-touch-icon", sizes="152x152", href=assetUrl + "/apple-touch-icon-152x152.png")
            link(rel="apple-touch-icon", sizes="180x180", href=assetUrl + "/apple-touch-icon-180x180.png")
            link(rel="apple-touch-icon", sizes="180x180", href=assetUrl + "/apple-touch-icon.png")
            link(href=assetUrl + "/iphone5_splash.png", media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)", rel="apple-touch-startup-image")
            link(href=assetUrl + "/iphone5_splash-landscape.png", media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)", rel="apple-touch-startup-image")
            link(href=assetUrl + "/iphone6_splash.png", media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)", rel="apple-touch-startup-image")
            link(href=assetUrl + "/iphone6_splash-landscape.png", media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)", rel="apple-touch-startup-image")
            link(href=assetUrl + "/iphoneplus_splash.png", media="(device-width: 621px) and (device-height: 1104px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)", rel="apple-touch-startup-image")
            link(href=assetUrl + "/iphoneplus_splash-landscape.png", media="(device-width: 621px) and (device-height: 1104px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)", rel="apple-touch-startup-image")
            link(href=assetUrl + "/iphonex_splash.png", media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)", rel="apple-touch-startup-image")
            link(href=assetUrl + "/iphonex_splash-landscape.png", media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)", rel="apple-touch-startup-image")
            link(href=assetUrl + "/ipad_splash.png", media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)", rel="apple-touch-startup-image")
            link(href=assetUrl + "/ipad_splash-landscape.png", media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)", rel="apple-touch-startup-image")
            link(href=assetUrl + "/ipadpro1_splash.png", media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)", rel="apple-touch-startup-image")
            link(href=assetUrl + "/ipadpro1_splash-landscape.png", media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)", rel="apple-touch-startup-image")
            link(href=assetUrl + "/ipadpro2_splash.png", media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)", rel="apple-touch-startup-image")
            link(href=assetUrl + "/ipadpro2_splash-landscape.png", media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)", rel="apple-touch-startup-image")
            link(rel="mask-icon", href=assetUrl + "/safari-pinned-tab.svg", color="#ec7500")
            link(rel="icon", type="image/png", sizes="32x32", href=assetUrl + "/favicon-32x32.png")
            link(rel="icon", type="image/png", sizes="16x16", href=assetUrl + "/favicon-16x16.png")
            link(rel="icon", type="image/png", sizes="194x194", href=assetUrl + "/favicon-194x194.png")
            meta(name="msapplication-TileImage", content=assetUrl + "/mstile-144x144.png")
            meta(name="msapplication-config", content=assetUrl + "/browserconfig.xml")
            link(rel="icon", type="image/png", sizes="192x192", href=assetUrl + "/android-chrome-192x192.png")
            link(rel="manifest", href=assetUrl + "/manifest.json")
            link(rel="shortcut icon", type="image/x-icon", href=assetUrl + "/favicon.ico")

        meta(name="apple-mobile-web-app-capable", content="yes")
        meta(name="apple-mobile-web-app-status-bar-style", content="black")
        meta(name="msapplication-TileColor", content="#000000")
        meta(name="theme-color", content="#000000")

        if environment !== "printable"
            script.
                window.SENTRY_DSN = "!{sentryDsn}" || null;
                window.ENVIRONMENT = "!{environment}" || null;
                window.NAME = "!{name}" || null;
                window.VERSION = "!{version}" || null;
                window.LOGGER = !{logger} || null;
                window.GTM_CONTAINER = "!{gtmContainerId}" || null;
                window.GA_PROPERTY = "!{gaPropertyId}" || null;
                window.MIXPANEL_APP = "!{mixpanelAppId}" || null;
                window.FACEBOOK_APP = "!{facebookAppId}" || null;
                window.GTM_DATALAYER = [{appName: window.NAME}, {appVersion: window.VERSION}, {appEnvironment: window.ENVIRONMENT}, {app: {name: window.NAME, version: window.VERSION, environment: window.ENVIRONMENT}}];

            if !!gtmContainerId
                script.
                    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!="dataLayer"?"&l="+l:"";j.async=true;j.src="https://www.googletagmanager.com/gtm.js?id="+i+dl;f.parentNode.insertBefore(j,f);})(window,document,"script","GTM_DATALAYER","!{gtmContainerId}");
            else
                if !!gaPropertyId
                    script.
                        (function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga");ga("create","!{gaPropertyId}","auto");ga("send","pageview");
                if !!mixpanelAppId
                    script.
                        (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);mixpanel.init("!{mixpanelAppId}");
                if !!facebookAppId
                    script.
                        window.fbAsyncInit=function(){FB.init({appId:"{!facebookAppId}",xfbml:true,version:"v3.2"});FB.AppEvents.logPageView();};(function(d,s,id){varjs,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)){return;}js=d.createElement(s);js.id=id;js.src="https://connect.facebook.net/en_US/sdk.js";fjs.parentNode.insertBefore(js,fjs);}(document,"script","facebook-jssdk"));

        script(type="application/ld+json").
            !{meJsonLd}

        | !{injectedBase}
        | !{injectedTitle}
        | !{injectedLink}
        | !{injectedMeta}
        | !{injectedStyle}
        | !{injectedScript}
        | !{injectedNoScript}

    body
        if environment !== "printable"
            if !!gtmContainerId
                noscript
                    iframe(src="https://www.googletagmanager.com/ns.html?id=" + gtmContainerId height="0" width="0" style="display:none;visibility:hidden")
        block content
        if environment !== "printable"
            if !!esmBundleName
                script(nomodule src=assetUrl + "/vendor.js" defer)
                script(nomodule src=assetUrl + "/" + bundleName + ".js" defer async)
                script(type="module" src=assetUrl + "/vendor.esm.js")
                script(type="module" src=assetUrl + "/" + esmBundleName + ".js" async)
                if !!serviceWorkerInstallerBundleName
                    script(nomodule src=assetUrl + "/" + serviceWorkerInstallerBundleName + ".js" defer async)
                    script(type="module" src=assetUrl + "/" + serviceWorkerInstallerBundleName + ".esm.js")
                else if !!serviceWorkerBundleName
                    script(nomodule).
                        if("serviceWorker" in navigator){window.addEventListener("load",function(){navigator.serviceWorker.register("!{assetUrl}/!{serviceWorkerBundleName}.js");});}
                    script(type="module").
                        if("serviceWorker" in navigator){window.addEventListener("load",function(){navigator.serviceWorker.register("!{assetUrl}/!{serviceWorkerBundleName}.esm.js");});}
            else
                script(src=assetUrl + "/vendor.js" defer)
                script(src=assetUrl + "/" + bundleName + ".js" defer async)
                if !!serviceWorkerInstallerBundleName
                    script(src=assetUrl + "/" + serviceWorkerInstallerBundleName + ".js" defer async)
                else if !!serviceWorkerBundleName
                    script.
                        if("serviceWorker" in navigator){window.addEventListener("load",function(){navigator.serviceWorker.register("!{assetUrl}/!{serviceWorkerBundleName}.js");});}
